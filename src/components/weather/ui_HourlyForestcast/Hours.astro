---
import WeatherIcon from "./WeatherIcon.astro";

interface Props {
    hourly: {
        time: string[];
        temperature_2m: number[];
        weather_code: number[];
    };
}

const { hourly } = Astro.props;

// YA NO CORTAMOS AQUÍ. Mapeamos todo lo que nos mande la utilidad (24 horas).
const horasParaMostrar = hourly.time.map((time, i) => {
    return {
        horaLegible: new Date(time).toLocaleTimeString("en-US", {
            hour: "2-digit",
            minute: "2-digit",
        }),
        temperatura: Math.round(hourly.temperature_2m[i]),
        codigoClima: hourly.weather_code[i],
    };
});
---

<div
    class="flex flex-col gap-3 p-2 max-h-[560px] overflow-y-auto pr-2 no-scrollbar"
>
    {
        horasParaMostrar.map((item) => (
            <div class="flex flex-row items-center justify-between p-1 theme-card shrink-0">
                <div class="flex flex-row items-center gap-2 text-white">
                    <WeatherIcon
                        code={item.codigoClima}
                        class="w-10 h-10 mb-2"
                    />
                    <span class="text-sm font-light">{item.horaLegible}</span>
                </div>
                <span class="text-xl font-semibold text-white">
                    {item.temperatura}°
                </span>
            </div>
        ))
    }
</div>

<style>
    /* Hide scrollbar for Chrome, Safari and Opera */
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .no-scrollbar {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
    }
</style>
