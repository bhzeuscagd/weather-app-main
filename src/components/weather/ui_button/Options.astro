---
/* =========================================
   ZONA DE JAVASCRIPT / TYPESCRIPT (Frontmatter)
   Esto se ejecuta en el servidor antes de enviar el HTML
   ========================================= */

// 1. Importamos tu componente de Icono para poder usarlo abajo
import Icon from "../../ui/Icon.astro";

// 2. Definimos la forma (interface) que tendrá CADA opción individual
interface Options {
    label: string; // El texto que ve el usuario (ej: "Celsius")
    dataunit: string; // El valor interno para el código (ej: "celsius")
    icon?: string; // El nombre del icono (opcional gracias al "?")
}

// 3. Definimos qué datos necesita recibir este componente entero para funcionar
interface Props {
    title: string; // El título de la sección (ej: "Temperature")
    options: Options[]; // Una lista (array) de las opciones definidas arriba
    activeUnit: string; // El valor que está seleccionado actualmente
}

// 4. Extraemos las propiedades de Astro.props para usarlas más fácil en el HTML
const { title, options, activeUnit } = Astro.props;
---

<div class="p-1">
    <span
        class="block px-4 py-1.5 font-DMSans text-neutral-400 text-xs tracking-wider"
    >
        {title}
    </span>

    {
        options.map((option) => {
            // 5. LÓGICA CLAVE: Comparamos si el valor de este botón coincide con el activo.
            // Devuelve true si coinciden, false si no.
            const isActive = option.dataunit === activeUnit;

            return (
                // Creamos el botón para esta opción específica
                <button
                    class:list={[
                        // Clases fijas: diseño base, flexbox, hover effects...
                        "flex items-center justify-between  px-4 py-2 my-1 text-sm w-full text-left transition-colors hover:px-5 hover:rounded-md hover:bg-white/5 hover:text-white",

                        // Clase condicional: Si isActive es true, texto blanco. Si no, gris.
                        isActive
                            ? "px-5 rounded-md bg-white/5 text-white"
                            : "text-gray-300",
                    ]}
                    data-unit={option.dataunit}
                >
                    <span>{option.label}</span>

                    {isActive && (
                        //la opción tiene icono personalizado, úsalo. Si no, usa "check".
                        <Icon
                            name={option.icon || "check"}
                            class="w-3 h-3 text-white"
                        />
                    )}
                </button>
            );
        })
    }
</div>
