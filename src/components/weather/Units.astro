---
// src/components/weather/UnitSelector.astro
import Icon from "../ui/Icon.astro";

// Recibimos la unidad actual para saber cuál marcar con el "check"
interface Props {
    currentUnit: "metric" | "imperial";
}

const { currentUnit } = Astro.props;
const isMetric = currentUnit === "metric";
---

<dropdown class="relative inline-block text-left z-50 group ml-100">
    <button
        class="font-DMSans inline-flex w-full justify-center align-center gap-2 rounded-md bg-white/10 px-2 py-1 text-sm text-white inset-ring-1 inset-ring-white/5 hover:bg-white/20 hover:border-black hover:border-solid hover:border-2 hover:ring-2 hover:ring-white"
    >
        <Icon name="units" class="w-3 h-5 text-white" />
        <span>Units</span>
        <Icon name="dropdown" class="w-2.5 h-5 text-white align-center" />
    </button>

    <menu
        class="absolute right-0 top-full mt-2 group-hover:block hidden group-focus-within:block w-48 origin-top-right divide-y divide-white/10 rounded-md bg-white/10 outline-1 border border-white/10 transition transition-discrete backdrop-blur-md"
    >
        <div class="p-1">
            <button
                class="border-hover rounded-md block w-full text-left px-2 py-1 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors"
                id="unit-toggle"
            >
                Switch to {isMetric ? "imperial" : "metric"}
            </button>
        </div>
        <div class="py-1">
            <span
                class="block px-4 py-1.5 font-DMSans text-neutral-400 text-xs uppercase tracking-wider"
                >Temperature</span
            >
            <button
                class="flex items-center justify-between px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white w-full text-left transition-colors"
                data-unit="celsius"
            >
                <span>Celsius (°C)</span>
                {
                    isMetric && (
                        <Icon name="check" class="w-3 h-3 text-blue-400" />
                    )
                }
            </button>
            <button
                class="flex items-center justify-between px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white w-full text-left transition-colors"
                data-unit="fahrenheit"
            >
                <span>Fahrenheit (°F)</span>
                {
                    !isMetric && (
                        <Icon name="check" class="w-3 h-3 text-blue-400" />
                    )
                }
            </button>
        </div>

        <div class="py-1">
            <span
                class="block px-4 py-1.5 font-DMSans text-neutral-400 text-xs uppercase tracking-wider"
                >Wind speed</span
            >
            <button
                class="flex items-center justify-between px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white w-full text-left transition-colors"
                data-wind="kmh"
            >
                <span>km/h</span>
            </button>
            <button
                class="flex items-center justify-between px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white w-full text-left transition-colors"
                data-wind="mph"
            >
                <span>mph</span>
            </button>
        </div>

        <div class="py-1">
            <span
                class="block px-4 py-1.5 font-DMSans text-neutral-400 text-xs uppercase tracking-wider"
                >Precipitation</span
            >
            <button
                class="flex items-center justify-between px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white w-full text-left transition-colors"
                data-precip="mm"
            >
                <span>Millimeters (mm)</span>
            </button>
            <button
                class="flex items-center justify-between px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white w-full text-left transition-colors"
                data-precip="inch"
            >
                <span>Inches (in)</span>
            </button>
        </div>
    </menu>
</dropdown>
